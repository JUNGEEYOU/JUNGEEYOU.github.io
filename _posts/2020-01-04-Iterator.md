---
layout: post
title: "9-1. ì´í„°ë ˆì´í„° íŒ¨í„´(Iterator Pattern)"
date: 2020-01-04
excerpt: ""
tags: [Iterator, Iterator Pattern, ì´í„°ë ˆì´í„° íŒ¨í„´, head first design patterns, design pattern]
comments: true
design_patterns: true
---



# ğŸ‘€ í•™ìŠµ ëª©í‘œ

- ì´í„°ë ˆì´í„° íŒ¨í„´ì„ ì´í•´í•˜ë©°, ì‚¬ìš©í•˜ëŠ” ëª©ì ì„ ì´í•´í•œë‹¤.
- ì˜ˆì œë¡œ ì´í„°ë ˆì´í„° íŒ¨í„´ì„ ì´í•´í•œë‹¤.

# 1. ì´í„°ë ˆì´í„° íŒ¨í„´ì´ë€?

> ì»¬ë ‰ì…˜ êµ¬í˜„ ë°©ë²•ì„ ë…¸ì¶œì‹œí‚¤ì§€ ì•Šìœ¼ë©´ì„œë„ ê·¸ ì§‘í•©ì²´ ì•ˆì— ë“¤ì–´ìˆëŠ” ëª¨ë“  í•­ëª©ì„ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

- ì•„ë˜ì™€ ê°™ì´ í´ë¼ì´ì–¸íŠ¸ëŠ” íƒ€ì… ìƒê´€ ì—†ì´ ë‘ ì¸í„°í˜ì´ìŠ¤ë¡œë§Œ ì ‘ê·¼í•˜ë©´ ë˜ë¯€ë¡œ êµ¬ì²´ì ì¸ íƒ€ì…ì„ ì•Œ í•„ìš”ê°€ ì—†ë‹¤.

![9%201/Untitled.png](/assets/img/design_pattern/Iterator/Untitled.png)

[https://refactoring.guru/design-patterns/iterator](https://refactoring.guru/design-patterns/iterator) ì´ë¯¸ì§€ ì°¸ê³ 

### ì‚¬ìš© ëª©ì 

- í´ë¼ì´ì–¸íŠ¸í•œí…Œ ê°ì²´ë“¤ì˜ ì €ì¥ ë°©ì‹ì„ ëª¨ë‘ ì•Œë ¤ì¤˜ì•¼í• ê¹Œìš”? ì•„ë‹™ë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ëŠ” ì €ì¥ ë°©ì‹ì„ ì•Œì•„ì„œ ì ‘ê·¼í•˜ëŠ” ê²ƒì€ ë¶ˆí¸í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì´í„°ë ˆì´í„° íŒ¨í„´ì„ ì‚¬ìš©í•´ì„œ ì–´ë–¤ ì €ì¥ ë°©ì‹ì´ë“  ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼í•˜ê²Œ í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

---

# 2. ì´í„°ë ˆì´í„° íŒ¨í„´ ì ìš©

## 2-1. ê°ì²´ ë§ˆì„ ì‹ë‹¹ê³¼ ê°ì²´ ë§ˆì„ íŒ¬ì¼€ì´í¬ í•˜ìš°ìŠ¤  í•©ë³‘

> ë©”ë‰´ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë°©ì‹ì´ ë‹¤ë¥¸ ì‹ë‹¹ 2ê°œë¥¼ í•©ë³‘í•˜ë ¤ê³ í•œë‹¤.

- MenuItem
    - ìš°ì„  í•´ë‹¹ í´ë˜ìŠ¤ë¡œ ë©”ë‰´ë¥¼ ê´€ë¦¬í•˜ê¸°ë¡œ ê²°ì •ì„ í•˜ì˜€ë‹¤.
{% highlight java %}
    // MenuItem: ì ì‹¬ ì‹ì‚¬ ë©”ë‰´ í•­ëª©ì„ ë‹´ëŠ” í´ë˜ìŠ¤
    public class MenuItem {
        String name;
        String description;
        boolean vegetarian;
        double price;
    
        public MenuItem(String name,
                        String description,
                        boolean vegetarian,
                        double price)
        {
            this.name = name;
            this.description = description;
            this.vegetarian = vegetarian;
            this.price = price;
        }
    
        public String getName() {
            return name;
        }
    
        public String getDescription() {
            return description;
        }
    
        public double getPrice() {
            return price;
        }
    
        public boolean isVegetarian() {
            return vegetarian;
        }
        public String toString() {
            return (name + ", $" + price + "\n   " + description);
        }
    }
{% endhighlight %}
- DinerMenu: ê°ì²´ ì‹ë‹¹ ë©”ë‰´ ì •ì˜ í´ë˜ìŠ¤
{% highlight java %}
    // DinerMenu: ê°ì²´ì§€í–¥ ì‹ë‹¹ ì €ë… ë©”ë‰´ ì •ì˜ í´ë˜ìŠ¤ - ArrayListê°€ ì•„ë‹Œ ë°°ì—´ ì‚¬ìš©
    public class DinerMenu{
        static final int MAX_ITEMS = 6;
        int numberOfItems = 0;
        MenuItem[] menuItems;
    
        public DinerMenu() {
            menuItems = new MenuItem[MAX_ITEMS];
    
            addItem("Vegetarian BLT",
                    "(Fakin') Bacon with lettuce & tomato on whole wheat", true, 2.99);
            addItem("BLT",
                    "Bacon with lettuce & tomato on whole wheat", false, 2.99);
            addItem("Soup of the day",
                    "Soup of the day, with a side of potato salad", false, 3.29);
            addItem("Hotdog",
                    "A hot dog, with saurkraut, relish, onions, topped with cheese",
                    false, 3.05);
            addItem("Steamed Veggies and Brown Rice",
                    "Steamed vegetables over brown rice", true, 3.99);
            addItem("Pasta",
                    "Spaghetti with Marinara Sauce, and a slice of sourdough bread",
                    true, 3.89);
        }
    
        public void addItem(String name, String description,
                            boolean vegetarian, double price)
        {
            MenuItem menuItem = new MenuItem(name, description, vegetarian, price);
            if (numberOfItems >= MAX_ITEMS) {
                System.err.println("Sorry, menu is full!  Can't add item to menu");
            } else {
                menuItems[numberOfItems] = menuItem;
                numberOfItems = numberOfItems + 1;
            }
        }
    
        public MenuItem[] getMenuItems() {
            return menuItems;
        }
    
        // other menu methods here
    }
{% endhighlight %}
- PancakeHouseMenu
    - íŒ¬ì¼€ì´í¬ ë§ˆì„ ë©”ë‰´ ì •ì˜ í´ë˜ìŠ¤
{% highlight java %}
    import java.util.ArrayList;
    
    // PancakeHouseMenu: íŒ¬ì¼€ì´í¬ ë§ˆì„ ë©”ë‰´ í•­ëª© - ì‰½ê²Œ ì¶”ê°€í•˜ê¸° ìœ„í•´ ArrayList í˜•ì‹ ì‚¬ìš©
    public class PancakeHouseMenu{
        ArrayList menuItems;
    
        public PancakeHouseMenu() {
            menuItems = new ArrayList();
    
            addItem("K&B's Pancake Breakfast",
                    "Pancakes with scrambled eggs, and toast",
                    true,
                    2.99);
    
            addItem("Regular Pancake Breakfast",
                    "Pancakes with fried eggs, sausage",
                    false,
                    2.99);
    
            addItem("Blueberry Pancakes",
                    "Pancakes made with fresh blueberries",
                    true,
                    3.49);
    
            addItem("Waffles",
                    "Waffles, with your choice of blueberries or strawberries",
                    true,
                    3.59);
        }
    
        public void addItem(String name, String description,
                            boolean vegetarian, double price)
        {
            MenuItem menuItem = new MenuItem(name, description, vegetarian, price);
            menuItems.add(menuItem);
        }
    
        public ArrayList getMenuItems() {
            return menuItems;
        }
    
        // other menu methods here
{% endhighlight %}
- ì´ì œ ì´ ë‘ ë©”ë‰´ë¥¼  í•©ì³ ë³´ì—¬ì¤„ ì›¨ì´í„°ì¸ í´ë¼ì´ì–¸íŠ¸ë¥¼ êµ¬í˜„í•˜ì. êµ¬í˜„ ê¸°ëŠ¥ì€ ì•„ë˜ì™€ ê°™ë‹¤
    1. **printMenu():** ë©”ë‰´ì— ìˆëŠ” ëª¨ë“  í•­ëª© ì¶œë ¥ 
    2. **printBreakfastMenu():**  ì•„ì¹¨ ì‹ì‚¬ í•­ëª©ë§Œ ì¶œë ¥ 
    3. **printLunchMenu()**: ì ì‹¬ ì‹ì‚¬ í•­ëª© ì¶œë ¥ 
    4. **printVegerarianMenu()**: ì±„ì‹ì£¼ì˜ììš© ë©”ë‰´ í•­ëª©ë§Œ ì¶œë ¥ 
    5. **isItemVegetarian**(name): ì±„ì‹ì£¼ì˜ììš© ì¸ì§€ í™•ì¸ 
    - ìš°ì„  printMenu ë©”ì†Œë“œë§Œ êµ¬í˜„í•˜ìë©´,  ì•„ë˜ì™€ ê°™ë‹¤.
        - **ë¬¸ì œì **: ì›¨ì´í„°ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ë¶ˆí¸í•˜ê³ , ì½”ë“œ ê´€ë¦¬ í™•ì¥ ë“±ì„ í•˜ê¸° í˜ë“¤ì–´ ì§„ë‹¤.
{% highlight java %}
        PancakeHouseMenu pancakeHouseMenu = new PancakeHouseMenu();
        ArrayList breakfastItems = pancakeHouseMenu.getMenuItems();
        
        
        DinerMenu dinerMenu = new DinerMenu();
        MenuItem[] lunchItems = dinerMenu.getMenuItems();
        
        
        
        for ( int i=0; i < breakfaseItems.size(); i++) {
        
        MenuItem menuItem = breakfastItems.get(i);
        
        System.out.println(menuItem.getName());
        
        System.out.println(menuItem.getPrice());
        
        System.out.println(menuItem.getDescription());
        
        }
        
        
        
        for ( int i=0; i < lunchItems.length; i++) {
        
        MenuItem menuItem = lunchItems[i];
        
        System.out.println(menuItem.getName());
        
        System.out.println(menuItem.getPrice());
        
        System.out.println(menuItem.getDescription());
        
        }
{% endhighlight %}
 
## 2-2. ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë°˜ë³µì„ ìº¡ìŠí™”?

> ì§€ê¸ˆê¹Œì§€ ì›ì¹™ ì¤‘ì—  "ë°”ë€ŒëŠ” ë¶€ë¶„ì„ ìº¡ìŠí™”í•˜ë¼" ê°€ ìˆì—ˆë‹¤. ì´ë¥¼ ì°¸ê³ í•´ì„œ ë°˜ë³µë¬¸ì„ ìº¡ìŠí™”í•´ë³´ì.

### ì›¨ì´í„° printMenu ë°”ë€ŒëŠ” ë¶€ë¶„ ì°¾ê¸°

- **breakfaseItems.size() / lunchItems.length**
- **breakfastItems.get(i) / lunchItems[i]**
{% highlight java %}
    for ( int i=0; i < **breakfaseItems.size()**; i++) {
    
    		MenuItem menuItem = breakfastItems.get(i);
    		
    		System.out.println(menuItem.getName());
    		
    		System.out.println(menuItem.getPrice());
    		
    		System.out.println(menuItem.getDescription());
    
    }
    
    
    
    for ( int i=0; i < **lunchItems.length**; i++) {
    
    		MenuItem menuItem = lunchItems[i];
    		
    		System.out.println(menuItem.getName());
    		
    		System.out.println(menuItem.getPrice());
    		
    		System.out.println(menuItem.getDescription());
    
    }
{% endhighlight %}
### ì´í„°ë ˆì´í„° íŒ¨í„´ì„ ë§Œë“¤ì–´ êµ¬í˜„í•´ë³´ì.

- Iterator ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ì–´ íƒ€ì…ë³„ë¡œ ë‹¤ë¥¸ ë¶€ë¶„ì„ ìº¡ìŠí™” í•˜ì.
- ì•„ë˜ëŠ” ë‹¤ë¥¸ ì‹ë‹¹ 2ê°œê°€ íƒ€ì…ì´ ë‹¤ë¥¸ ë¶€ë¶„ì¸ next(), hasNext() ë©”ì†Œë“œë¥¼ êµ¬í˜„í•˜ì˜€ë‹¤.

![9%201/Untitled%201.png](/assets/img/design_pattern/Iterator/Untitled%201.png)

### ì½”ë“œ

- Iterator ì¸í„°í˜ì´ìŠ¤ ì •ì˜
{% highlight java %}
    // Iterator: Iterator ì¸í„°í˜ì´ìŠ¤ 
    public interface Iterator {
        boolean hasNext();  // ë‹¤ìŒ ë°˜ë³µ ì‘ì—…ì„ í•  ê²ƒì´ ìˆëŠ”ì§€ ë¦¬í„´ 
        Object next();      // ë‹¤ìŒ í•­ëª© ë¦¬í„´  
    }
{% endhighlight %}
- DinerMenuIterator í´ë˜ìŠ¤  ì •ì˜, ì´í„°ë ˆì´í„° ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
    - ë¦¬ìŠ¤íŠ¸ íƒ€ì…
{% highlight java %}
    // DinerMenuIterator: list í˜•íƒœë¡œ Iterator ì •ì˜
    public class DinerMenuIterator implements Iterator {
    	MenuItem[] items;
    	int position = 0;
    
    	// 1. ìŒì‹ë©”ë‰´ë“¤ì„ ì´ˆê¸°í™”
    	public DinerMenuIterator(MenuItem[] items)
    	{
    		this.items = items;
    	}
    	// 2. next(): ë‹¤ìŒ ìŒì‹ ë©”ë‰´ë¥¼ ë¦¬í„´
    	public MenuItem next() {
    		MenuItem menuItem = items[position];
    		position = position + 1;
    		return menuItem;
    	}
    
    	// 3. hasNext(): ë‹¤ìŒ ë©”ë‰´ê°€ ì¡´ì¬í•˜ëŠ”ì§€ boolean ë¦¬í„´
    	public boolean hasNext() {
    		if (position >= items.length || items[position] == null) {
    			return false;
    		} else {
    			return true;
    		}
    	}
    }
{% endhighlight %}
- PancakeHouseMenuIterator í´ë˜ìŠ¤ ì •ì˜
    - ArrayList íƒ€ì… êµ¬ì¡° ì •ì˜
{% highlight java %}
    // PancakeHouseMenuIterator: íŒ¬ì¼€ì´í¬ ArrayList êµ¬ì¡° í˜•íƒœë¡œ iterator ì •ì˜
    public class PancakeHouseMenuIterator implements Iterator {
    	ArrayList<MenuItem> items;
    	int position = 0;
     
    	public PancakeHouseMenuIterator(ArrayList<MenuItem> items) {
    		this.items = items;
    	}
     
    	public MenuItem next() {
    		MenuItem item = items.get(position);
    		position = position + 1;
    		return item;
    	}
     
    	public boolean hasNext() {
    		if (position >= items.size()) {
    			return false;
    		} else {
    			return true;
    		}
    	}
    }
{% endhighlight %}
### ëª¨ë“  ë©”ë‰´ í´ë˜ìŠ¤ê°€ ì´í„°ë ˆì´í„°ë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ” ë©”ì†Œë“œë¥¼ ë§Œë“¤ì.

- PancakeHouseMenu
{% highlight java %}
    public Iterator createIterator() {
    		return new PancakeHouseMenuIterator(menuItems);
    	}
{% endhighlight %}
- DinerMenu
{% highlight java %}
    public Iterator createIterator() {   // DinerMenuIterator ìƒì„±ì ë¦¬í„´
    		return new DinerMenuIterator(menuItems);
    	}
{% endhighlight %}
### ì›¨ì´í„° ì½”ë“œ ìˆ˜ì •
{% highlight java %}
    public class Waitress {
    	PancakeHouseMenu pancakeHouseMenu;
    	DinerMenu dinerMenu;
     
    	public Waitress(PancakeHouseMenu pancakeHouseMenu, DinerMenu dinerMenu) {
    		this.pancakeHouseMenu = pancakeHouseMenu;
    		this.dinerMenu = dinerMenu;
    
     
    	public void printMenu() {
    		// createIterator ë©”ì†Œë“œ í˜¸ì¶œí•˜ì—¬ ì´í„°ë ˆì´í„° ìƒì„±
    		Iterator pancakeIterator = pancakeHouseMenu.createIterator();  
    		Iterator dinerIterator = dinerMenu.createIterator();
    		
    		System.out.println("MENU\n----\nBREAKFAST");
    		printMenu(pancakeIterator);
    		System.out.println("\nLUNCH");
    		printMenu(dinerIterator);
    
    	}
     
    	private void printMenu(Iterator iterator) {
    		while (iterator.hasNext()) {
    			MenuItem menuItem = iterator.next();
    			System.out.print(menuItem.getName() + ", ");
    			System.out.print(menuItem.getPrice() + " -- ");
    			System.out.println(menuItem.getDescription());
    		}
    	}
{% endhighlight %}
## 2-3. java.util.literator ì ìš©í•˜ê¸°

- PancakeHouseMenu ì´í„°ë ˆì´í„° ìƒì„± ë©”ì†Œë“œ ìˆ˜ì •
    - ArrayList íƒ€ì…ì¸ íŒ¬ì¼€ì´í¬ëŠ” ì´í„°ë ˆì´í„°ë¥¼ ì§ì ‘ êµ¬í˜„í•  í•„ìš”ê°€ ì—†ë‹¤.
    - ì´ì „ì— ë§Œë“  PancakeHouseMenuIteratorëŠ” ì´ì œ í•„ìš”ì—†ë‹¤. ì œê±°í•˜ì.
{% highlight java %}
    public Iterator createIterator() {
    		return menuItems.iterator();
    	}
{% endhighlight %}
- DinerMenuIterator ì— remove() ë©”ì†Œë“œ ì§ì ‘ ë§Œë“¤ê¸°
    - ë¦¬ìŠ¤íŠ¸ íƒ€ì…ì€ Iteratorë¥¼ ì§ì ‘ êµ¬í˜„í•´ì•¼í•œë‹¤.
{% highlight java %}
    import java.util.Iterator;
    
    // DinerMenuIterator: list í˜•íƒœë¡œ Iterator ì •ì˜
    public class DinerMenuIterator implements Iterator {
    	MenuItem[] list;
    	int position = 0;
    
    	// 1. ìŒì‹ë©”ë‰´ë“¤ì„ ì´ˆê¸°í™”
    	public DinerMenuIterator(MenuItem[] items)
    	{
    		this.list = items;
    	}
    	// 2. next(): ë‹¤ìŒ ìŒì‹ ë©”ë‰´ë¥¼ ë¦¬í„´
    	public MenuItem next() {
    		MenuItem menuItem = list[position];
    		position = position + 1;
    		return menuItem;
    	}
    
    	// 3. hasNext(): ë‹¤ìŒ ë©”ë‰´ê°€ ì¡´ì¬í•˜ëŠ”ì§€ boolean ë¦¬í„´
    	public boolean hasNext() {
    		if (position >= list.length || list[position] == null) {
    			return false;
    		} else {
    			return true;
    		}
    	}
        // 4. remove()
    	public void remove() {
    		if (position <= 0) {
    			throw new IllegalStateException
    					("You can't remove an item until you've done at least one next()");
    		}
    		if (list[position-1] != null) {
    			for (int i = position-1; i < (list.length-1); i++) {
    				list[i] = list[i+1];
    			}
    			list[list.length-1] = null;
    		}
    	}
    
    }
    }
{% endhighlight %}
## 2-4. ë©”ë‰´ ì¸í„°í˜ì´ìŠ¤ í†µì¼ ì‹œí‚¤ê¸°

- Menu ì¸í„°í˜ì´ìŠ¤ ë§Œë“¤ê¸°
- ë‘ ê°€ì§€ íƒ€ì…ì¸ ë©”ë‰´ì— "implements Menu" ì¶”ê°€í•˜ê¸°
{% highlight java %}
    public interface Menu {
    	public Iterator createIterator();
    }
{% endhighlight %}
- ì›¨ì´í„° ë³€ê²½
    - Menu ë¶€ë¶„ ë³€ê²½
{% highlight java %}
    import java.util.Iterator;
    public class Waitress {
    	Menu pancakeHouseMenu;
    	Menu dinerMenu;
     
    	public Waitress(Menu pancakeHouseMenu, Menu dinerMenu) {
    		this.pancakeHouseMenu = pancakeHouseMenu;
    		this.dinerMenu = dinerMenu;
    	}
     
    	public void printMenu() {
    		Iterator pancakeIterator = pancakeHouseMenu.createIterator();
    		Iterator dinerIterator = dinerMenu.createIterator();
    
    		System.out.println("MENU\n----\nBREAKFAST");
    		printMenu(pancakeIterator);
    		System.out.println("\nLUNCH");
    		printMenu(dinerIterator);
    
    	}
     
    	private void printMenu(Iterator iterator) {
    		while (iterator.hasNext()) {
    			MenuItem menuItem = (MenuItem)iterator.next();
    			System.out.print(menuItem.getName() + ", ");
    			System.out.print(menuItem.getPrice() + " -- ");
    			System.out.println(menuItem.getDescription());
    		}
    	}
{% endhighlight %}
# ì°¸ê³ 

- Head first design patterns ì±…

# ì†ŒìŠ¤ ì½”ë“œ

- [https://github.com/JUNGEEYOU/Iterator](https://github.com/JUNGEEYOU/Iterator)
